<!DOCTYPE html>
<html lang="en-US" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="UTF-8" />
<title>Transferring files securely with SFTP</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)" />
<meta name="description" content="You use secure file transfer protocol (SFTP) to protect data when you upload and download files between Oracle Monetization Cloud and external systems." />
<meta name="dcterms.created" content="2018-08-31T10:19:16Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Monetization Cloud Integration Guide" />
<meta name="dcterms.identifier" content="E92624-02" />
<meta name="dcterms.isVersionOf" content="BCSIG" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2017, 2018, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../index.html" title="Home" type="text/html" />
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Prev" href="using-ssl-secure-connections-service-providers1.htm" title="Previous" type="text/html" />
<link rel="Next" href="notifications.htm" title="Next" type="text/html" />
<link rel="alternate" href="E92624-02.pdf" title="PDF version" type="application/pdf" />
<link rel="alternate" href="E92624-02.epub" title="ePub version" type="application/epub+zip" />
<link rel="alternate" href="E92624-02.mobi" title="Mobipocket version" type="application/x-mobipocket-ebook" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/fonts.css">
<link rel="stylesheet" href="../dcommon/css/foundation.css">
<link rel="stylesheet" href="../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css">
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
<script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-498A849B-2E40-476A-8610-A75AA0A308F7"></a> <span id="PAGE" style="display:none;">11/42</span> <!-- End Header -->
<a id="BCSIG2358"></a><a id="BCSIG2359"></a><a id="BCSIG2357"></a>
<h1 id="BCSIG-GUID-498A849B-2E40-476A-8610-A75AA0A308F7" class="sect1"><span class="enumeration_chapter">7</span> Transferring files securely with SFTP</h1>
<div>
<p>You use secure file transfer protocol (SFTP) to protect data when you upload and download files between Oracle Monetization Cloud and external systems.</p>
<div class="section">
<p class="subhead1">Topics in this document</p>
</div>
<!-- class="section" -->
<ul style="list-style-type: disc;">
<li>
<p><a href="transferring-files-securely1.htm#GUID-50F5265D-40B5-4FC0-80AA-9A74F7D82625">About transferring files with SFTP</a></p>
</li>
<li>
<p><a href="transferring-files-securely1.htm#GUID-4DA81982-DAF6-495E-8CDB-1FCA63BACDDB">Configuring your SFTP server</a></p>
</li>
<li>
<p><a href="transferring-files-securely1.htm#GUID-EAB8D2D1-BE92-4894-86AA-B5030B790BFC">Accessing your SFTP server</a></p>
</li>
<li>
<p><a href="transferring-files-securely1.htm#GUID-070F56E2-8AD3-46D7-91D1-AF1F4EA81452">Related topics</a></p>
</li>
</ul>
</div>
<a id="BCSIG2360"></a>
<div class="props_rev_3"><a id="GUID-50F5265D-40B5-4FC0-80AA-9A74F7D82625"></a>
<h2 id="BCSIG-GUID-50F5265D-40B5-4FC0-80AA-9A74F7D82625" class="sect2">About transferring files with SFTP</h2>
<div>
<p>Oracle Monetization Cloud includes an SFTP server, which you can use to transfer files securely between external sources and Oracle Monetization Cloud as follows:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Upload usage data:</span> To process usage records from external systems, you must upload them to your SFTP server. From there, a cron job that runs every five minutes automatically maps the external records to internal events and uploads them to Oracle Monetization Cloud. See <a href="rating-usage-oracle-monetization-cloud1.htm#GUID-9A341696-6A20-47E4-9E6E-0E559B8C9F87">About rating usage in Oracle Monetization Cloud</a>.</p>
</li>
<li>
<p><span class="bold">Download invoices:</span> Business Operations saves a subset of your invoices to the SFTP server. From there, you can download the invoices to an external system from which you can distribute them to your customers. See <a class="olink BCSUG508" target="_blank" href="../BCSUG/generating-invoices2.htm#BCSUG508">Generating invoices</a>.</p>
</li>
<li>
<p><span class="bold">Download general ledger reports:</span> After Business Operations generates general ledger reports, it saves them to your SFTP server. From there, you can download the reports to an external financial system for posting to your general ledger. See <a class="olink BCSUG552" target="_blank" href="../BCSUG/generating-general-ledger-reports2.htm#BCSUG552">Generating general ledger reports</a>.</p>
</li>
</ul>
</div>
</div>
<a id="BCSIG103"></a>
<div class="props_rev_3"><a id="GUID-4DA81982-DAF6-495E-8CDB-1FCA63BACDDB"></a>
<h2 id="BCSIG-GUID-4DA81982-DAF6-495E-8CDB-1FCA63BACDDB" class="sect2">Configuring your SFTP server</h2>
<div>
<p>To configure your SFTP server, submit a service request to Oracle support (<a href="https://support.oracle.com" target="_blank"><code class="codeph">https://support.oracle.com</code></a>). Include the following information:</p>
<ul style="list-style-type: disc;">
<li>
<p>The public key used to access the SFTP server from your computer.</p>
<p>To generate the key, run standard ssh-keygen commands on your computer. For example, run these commands on a Linux system:</p>
<pre dir="ltr">
cd $HOME/.ssh
rm -rf ./id_rsa.pub
ssh-keygen -t rsa 
</pre>
<p>The key is added to the <span class="bold">$HOME/.ssh/id_rsa.pub</span> file.</p>
</li>
<li>
<p>The email address of the person responsible for your SFTP account.</p>
</li>
</ul>
<p>The key is valid for one year. Oracle uses the email address to notify you when the key is about to expire.</p>
</div>
</div>
<a id="BCSIG2363"></a>
<div class="props_rev_3"><a id="GUID-EAB8D2D1-BE92-4894-86AA-B5030B790BFC"></a>
<h2 id="BCSIG-GUID-EAB8D2D1-BE92-4894-86AA-B5030B790BFC" class="sect2">Accessing your SFTP server</h2>
<div>
<p>To access your SFTP server, run the following command from the computer on which you generated your SFTP key:</p>
<pre dir="ltr">
sftp -oPort=22 <span class="italic">env</span>_tenant_sftp@<span class="italic">sftp_host</span>
 
</pre>
<p>where</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="italic">env</span> is one of the following values:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">prod</span> for a production environment</p>
</li>
<li>
<p><span class="bold">test</span> for a development environment</p>
</li>
</ul>
</li>
<li>
<p><span class="italic">sftp_host</span> is the host name of the SFTP server, which you were given when Oracle configured the server.</p>
</li>
</ul>
<p>Transfer files to and from the following directories. Use standard SFTP commands to navigate to the directories and to put or pull the files.</p>
<div class="tblformal" id="GUID-EAB8D2D1-BE92-4894-86AA-B5030B790BFC__GUID-8934AC92-C2CF-4642-B124-A721AC7D8906">
<table class="cellalignment86" summary="This table lists the SFTP server directories to which files can be uploaded and downloaded.">
<thead>
<tr class="cellalignment77">
<th class="cellalignment145" id="d4921e157">Transfer operation</th>
<th class="cellalignment146" id="d4921e160">Directory</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment77">
<td class="cellalignment147" id="d4921e165" headers="d4921e157">
<p>Upload usage records</p>
</td>
<td class="cellalignment148" headers="d4921e165 d4921e160">
<p><span class="bold">/u01/sftp/</span><span class="italic">env</span><span class="bold">_tenant_sftp/incoming/events</span></p>
</td>
</tr>
<tr class="cellalignment77">
<td class="cellalignment147" id="d4921e177" headers="d4921e157">
<p>Download invoices</p>
</td>
<td class="cellalignment148" headers="d4921e177 d4921e160">
<p><span class="bold">/u01/sftp/</span><span class="italic">env</span><span class="bold">_tenant_sftp/outgoing/invoices</span></p>
</td>
</tr>
<tr class="cellalignment77">
<td class="cellalignment147" id="d4921e189" headers="d4921e157">
<p>Download general ledger reports</p>
</td>
<td class="cellalignment148" headers="d4921e189 d4921e160">
<p><span class="bold">/u01/sftp/</span><span class="italic">env</span><span class="bold">_tenant_sftp/outgoing/glreports</span></p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>To check the status of usage records that Oracle Monetization Cloud attempted to convert to the internal format and upload, go to the following directories.</p>
<div class="tblformal" id="GUID-EAB8D2D1-BE92-4894-86AA-B5030B790BFC__GUID-9740EC2C-F123-448E-AD4A-230732D4CD99">
<table class="cellalignment86" summary="This table lists the SFTP server directories to which files can be uploaded and downloaded.">
<thead>
<tr class="cellalignment77">
<th class="cellalignment169" id="d4921e210">Processing status</th>
<th class="cellalignment170" id="d4921e213">Directory</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment77">
<td class="cellalignment171" id="d4921e218" headers="d4921e210">
<p>Succeeded</p>
</td>
<td class="cellalignment172" headers="d4921e218 d4921e213">
<p><span class="bold">/u01/sftp/</span><span class="italic">env</span><span class="bold">_tenant_sftp/outgoing/events_processed/success</span></p>
</td>
</tr>
<tr class="cellalignment77">
<td class="cellalignment171" id="d4921e230" headers="d4921e210">
<p>Failed</p>
</td>
<td class="cellalignment172" headers="d4921e230 d4921e213">
<p><span class="bold">/u01/sftp/</span><span class="italic">env</span><span class="bold">_tenant_sftp/outgoing/events_processed/reject</span></p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>The <span class="bold">/success</span> directory contains copies of the original external records that were successfully processed.</p>
<p>The <span class="bold">/reject</span> directory contains copies of the original external records that Oracle Monetization Cloud was unable to convert and upload.</p>
<p>Each record also has an associated XML file that contains all of the error messages that were generated for the record. The error messages are in a file named <span class="bold"><span class="italic">usagefile</span>_lerr.xml</span>, where <span class="italic">usagefile</span> is the file name of the original external record.</p>
</div>
</div>
<a id="BCSIG2364"></a>
<div class="props_rev_3"><a id="GUID-070F56E2-8AD3-46D7-91D1-AF1F4EA81452"></a>
<h2 id="BCSIG-GUID-070F56E2-8AD3-46D7-91D1-AF1F4EA81452" class="sect2">Related topics</h2>
<div>
<ul style="list-style-type: disc;">
<li>
<p><a href="rating-usage-oracle-monetization-cloud1.htm#GUID-9A341696-6A20-47E4-9E6E-0E559B8C9F87">About rating usage in Oracle Monetization Cloud</a></p>
</li>
<li>
<p><a class="olink BCSUG508" target="_blank" href="../BCSUG/generating-invoices2.htm#BCSUG508">Generating invoices</a></p>
</li>
<li>
<p><a class="olink BCSUG552" target="_blank" href="../BCSUG/generating-general-ledger-reports2.htm#BCSUG552">Generating general ledger reports</a></p>
</li>
<li>
<p><a href="integrating-your-business-systems1.htm#GUID-60243463-3A48-49E1-B841-A10F134A08A6">About integrating your business systems</a></p>
</li>
</ul>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment76">
<tr>
<td class="cellalignment83">
<table class="cellalignment81">
<tr>
<td class="cellalignment80"><a href="using-ssl-secure-connections-service-providers1.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment80"><a href="notifications.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2017, 2018, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment85">
<table class="cellalignment79">
<tr>
<td class="cellalignment80"><a href="../index.html"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment80"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment80"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
