<!DOCTYPE html>
<html lang="en-US">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="UTF-8" />
<title>Rating usage in Oracle Monetization Cloud</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)" />
<meta name="description" content="This document provides an overview of how Oracle Monetization Cloud calculates charges for the use of your services." />
<meta name="dcterms.created" content="2018-08-31T10:19:16Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Monetization Cloud Integration Guide" />
<meta name="dcterms.identifier" content="E92624-02" />
<meta name="dcterms.isVersionOf" content="BCSIG" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2017, 2018, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../index.html" title="Home" type="text/html" />
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Prev" href="rating-usage.htm" title="Previous" type="text/html" />
<link rel="Next" href="testing-and-troubleshooting.htm" title="Next" type="text/html" />
<link rel="alternate" href="E92624-02.pdf" title="PDF version" type="application/pdf" />
<link rel="alternate" href="E92624-02.epub" title="ePub version" type="application/epub+zip" />
<link rel="alternate" href="E92624-02.mobi" title="Mobipocket version" type="application/x-mobipocket-ebook" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/fonts.css">
<link rel="stylesheet" href="../dcommon/css/foundation.css">
<link rel="stylesheet" href="../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css">
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
<script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-860FAC24-D22F-4755-B528-0CDABC3E206C"></a> <span id="PAGE" style="display:none;">21/42</span> <!-- End Header -->
<a id="BCSIG2349"></a><a id="BCSIG2350"></a><a id="BCSIG2348"></a>
<h1 id="BCSIG-GUID-860FAC24-D22F-4755-B528-0CDABC3E206C" class="sect1"><span class="enumeration_chapter">14</span> Rating usage in Oracle Monetization Cloud</h1>
<div>
<p>This document provides an overview of how Oracle Monetization Cloud calculates charges for the use of your services.</p>
<div class="section">
<p class="subhead1">Topics in this document</p>
</div>
<!-- class="section" -->
<ul style="list-style-type: disc;">
<li>
<p><a href="rating-usage-oracle-monetization-cloud1.htm#GUID-9A341696-6A20-47E4-9E6E-0E559B8C9F87">About rating usage in Oracle Monetization Cloud</a></p>
</li>
<li>
<p><a href="rating-usage-oracle-monetization-cloud1.htm#GUID-E1DB5C41-BEB1-4DDB-9002-15314026ED1C">Mapping data from external records to internal events</a></p>
</li>
<li>
<p><a href="rating-usage-oracle-monetization-cloud1.htm#GUID-51CFED3D-A40F-4550-AABF-FD9D8FA974D6">Related topics</a></p>
</li>
</ul>
</div>
<a id="BCSIG2351"></a>
<div class="props_rev_3"><a id="GUID-9A341696-6A20-47E4-9E6E-0E559B8C9F87"></a>
<h2 id="BCSIG-GUID-9A341696-6A20-47E4-9E6E-0E559B8C9F87" class="sect2">About rating usage in Oracle Monetization Cloud</h2>
<div>
<p>When a customer uses a service, the usage data is stored in a record. To rate usage, Oracle Monetization Cloud must capture data about the usage event. For example, to rate a phone call, it needs the number that made the call, the start time, and the end time. Typically, the phone number identifies the customer, which in turn identifies the charge offers owned by the customer that specify how to measure and charge for the event.</p>
<div class="infobox-note" id="GUID-9A341696-6A20-47E4-9E6E-0E559B8C9F87__GUID-E605E8B9-438D-470D-9368-5272DE01EE5A">
<p class="notep1">Note:</p>
<p>Oracle Monetization Cloud performs batch rating, not real-time rating. Batch rating supports post-paid usage. It doesn't support prepaid usage.</p>
</div>
<p>Rating usage involves the following steps:</p>
<ol>
<li>
<p>You create templates that map the data from your external usage records to events in Oracle Monetization Cloud. See <a href="rating-usage-oracle-monetization-cloud1.htm#GUID-E1DB5C41-BEB1-4DDB-9002-15314026ED1C">Mapping data from external records to internal events</a>.</p>
</li>
<li>
<p>You upload your usage records to the <span class="bold">/u01/sftp/</span><span class="italic">env</span><span class="bold">_tenant_sftp/incoming/events</span> directory of your secure file transfer protocol (SFTP) server, where <span class="italic">env</span> is <span class="bold">prod</span> for production environment or <span class="bold">test</span> for development environment. See <a href="transferring-files-securely1.htm#GUID-498A849B-2E40-476A-8610-A75AA0A308F7" title="You use secure file transfer protocol (SFTP) to protect data when you upload and download files between Oracle Monetization Cloud and external systems.">Transferring files securely with SFTP</a>.</p>
</li>
<li>
<p>Every five minutes, a cron job uses the mapping templates to convert all external records in the incoming events directory to the internal format and then loads them into Oracle Monetization Cloud.</p>
<ul style="list-style-type: disc;">
<li>
<p>Original versions of successfully loaded records are stored here: <span class="bold">/u01/sftp/</span><span class="italic">env</span>_<span class="bold">tenant_sftp/outgoing/events_processed/success</span>.</p>
</li>
<li>
<p>Original versions of unsuccessfully loaded records and files containing the error messages for each record are stored here: <span class="bold">/u01/sftp/</span><span class="italic">env</span><span class="bold">_tenant_sftp/outgoing/events_processed/reject</span>.</p>
</li>
</ul>
</li>
<li>
<p>If a record is rejected, Oracle notifies you and helps you resolve the problem.</p>
</li>
<li>
<p>Successfully loaded usage events are measured and rated based on the applicable charge and discount offers (for example, 10 cents per minute for a wireless call).</p>
</li>
<li>
<p>The usage charges are added to your customer's account balance.</p>
</li>
</ol>
<p>For information about creating pricing components to rate usage, see the following topics:</p>
<ul style="list-style-type: disc;">
<li>
<p><a class="olink BCSUG424" target="_blank" href="../BCSUG/creating-pricing-setup-components1.htm#BCSUG424">Creating pricing setup components</a></p>
</li>
<li>
<p><a class="olink BCSUG433" target="_blank" href="../BCSUG/creating-charge-offers1.htm#BCSUG433">Configuring usage charges</a></p>
</li>
</ul>
</div>
</div>
<a id="BCSIG131"></a>
<div class="props_rev_3"><a id="GUID-E1DB5C41-BEB1-4DDB-9002-15314026ED1C"></a>
<h2 id="BCSIG-GUID-E1DB5C41-BEB1-4DDB-9002-15314026ED1C" class="sect2">Mapping data from external records to internal events</h2>
<div>
<p>When a customer uses a service, the usage data is stored in a record. For example, details about a phone call session might be recorded in a call detail record (CDR). To enable Oracle Monetization Cloud to process the record and charge your customers, you must map the data in the external record to events in Oracle Monetization Cloud.</p>
<p>To map data from external records to events in Oracle Monetization Cloud, you create an event mapping template. In Business Configuration, select <span class="bold">Service Design</span>, the <span class="bold">Event Mapping Templates</span> tab, and then <span class="bold">Create Template</span>.</p>
<p>When you create an event mapping template, you specify the following:</p>
<ul style="list-style-type: disc;">
<li>
<p>The file naming pattern for your external records, without the file name extension. This pattern tells Oracle Monetization Cloud which files to apply the mapping rules to.</p>
<p>For example, a value of <span class="bold">activityUsage*</span> specifies to apply the mapping rules to all files with this file naming pattern.</p>
</li>
<li>
<p>The sample file. Upload a sample file in CSV format that includes the same fields that your external records will contain.</p>
</li>
<li>
<p>How to read the uploaded CSV file.</p>
<ul style="list-style-type: disc;">
<li>
<p>The delimiter used between fields, such as a tab or space.</p>
</li>
<li>
<p>The special characters that should be treated as text, such as ().</p>
</li>
<li>
<p>Whether to trim extra white space between fields. Use this if your CSV file uses a space delimiter and the fields have more than one space separating them.</p>
</li>
<li>
<p>Whether the first row in the file is a header row.</p>
</li>
<li>
<p>Which fields in the file represent a record type.</p>
</li>
</ul>
</li>
<li>
<p>How to map fields from the external record to fields in Oracle Monetization Cloud events, including:</p>
<ul style="list-style-type: disc;">
<li>
<p>The field from your external records that you're mapping from.</p>
</li>
<li>
<p>The service and event that you're mapping to in Oracle Monetization Cloud.</p>
</li>
<li>
<p>The service identifier.</p>
</li>
<li>
<p>The name and data type of the field you're mapping to in Oracle Monetization Cloud.</p>
</li>
<li>
<p>(Optional) The default value for the field in Oracle Monetization Cloud. This value is assigned when the incoming value is empty.</p>
</li>
<li>
<p>(Optional) The override value for the field in Oracle Monetization Cloud. This value overrides the incoming value.</p>
</li>
<li>
<p>(Optional) The format to use for timestamps.</p>
</li>
</ul>
</li>
</ul>
</div>
</div>
<a id="BCSIG2354"></a>
<div class="props_rev_3"><a id="GUID-51CFED3D-A40F-4550-AABF-FD9D8FA974D6"></a>
<h2 id="BCSIG-GUID-51CFED3D-A40F-4550-AABF-FD9D8FA974D6" class="sect2">Related topics</h2>
<div>
<ul style="list-style-type: disc;">
<li>
<p><a href="transferring-files-securely1.htm#GUID-498A849B-2E40-476A-8610-A75AA0A308F7" title="You use secure file transfer protocol (SFTP) to protect data when you upload and download files between Oracle Monetization Cloud and external systems.">Transferring files securely with SFTP</a></p>
</li>
<li>
<p><a href="integrating-your-business-systems1.htm#GUID-60243463-3A48-49E1-B841-A10F134A08A6">About integrating your business systems</a></p>
</li>
</ul>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment76">
<tr>
<td class="cellalignment83">
<table class="cellalignment81">
<tr>
<td class="cellalignment80"><a href="rating-usage.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment80"><a href="testing-and-troubleshooting.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2017, 2018, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment85">
<table class="cellalignment79">
<tr>
<td class="cellalignment80"><a href="../index.html"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment80"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment80"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
