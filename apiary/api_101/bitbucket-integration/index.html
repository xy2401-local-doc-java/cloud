<!DOCTYPE html><html prefix="og: http://ogp.me/ns#"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Using Apiary with Bitbucket | Apiary Help</title>
  <link rel="stylesheet" href="../../css/main.css?8d147e3a37768b440f679294bd9bc305">

  
    
      <meta name="description" content="How to sync Apiary with Bitbucket and others VCS systems">
    
    <meta property="og:title" content="Using Apiary with Bitbucket">
    <meta property="og:site_name" content="Apiary.io">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://help.apiary.io/api_101/bitbucket-integration/">
    <meta property="og:image" content="https://help.apiary.io/images/apiary_sharing.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">

    
      <meta property="og:description" content="How to sync Apiary with Bitbucket and others VCS systems">
    

    <meta property="og:site_name" content="Apiary Help">

    
      <meta property="og:see_also" content="https://help.apiary.io/api_101/gitlab-integration/">
    
      <meta property="og:see_also" content="https://help.apiary.io/api_101/enhancing-apiary-workflow/">
    
      <meta property="og:see_also" content="https://help.apiary.io/api_101/dredd-tutorial/">
    
      <meta property="og:see_also" content="https://help.apiary.io/tools/github-sync/">
    
      <meta property="og:see_also" content="https://help.apiary.io/tools/automated-testing/testing-local/">
    

    <meta property="twitter:account_id" content="183960592">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@apiaryio">
    <meta name="twitter:creator" content="@apiaryio">
    <meta name="twitter:title" content="Using Apiary with Bitbucket">

    
      <meta name="twitter:description" content="How to sync Apiary with Bitbucket and others VCS systems">
    

    <meta name="twitter:image" content="https://help.apiary.io/images/apiary_sharing.png">
    <meta name="twitter:url" content="https://help.apiary.io/api_101/bitbucket-integration/">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="./index.html">
    <link rel="dns-prefetch" href="//jsapi.apiary.io">
  

  <link rel="sitemap" type="application/xml" title="Sitemap" href="../../sitemap.xml">
<script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>


  <body vocab="http://schema.org/" typeof="WebPage">
    <div class="pageWrap">
      <header class="site-header">
  <div class="site-header-inner">
    <a class="site-title" href="https://apiary.io">
      <img src="../../images/oracleapiarylogo.png" alt="Apiary logo">
      <span>Apiary Help</span>
    </a>

    <nav class="site-nav">
      <ul>
        <li><a href="https://apiary.io/how-it-works">How It Works</a></li>
<li><a href="https://apiary.io/plans">Plans</a></li>
<li><a href="https://apiary.io/products">Product</a></li>
<li><a href="../../">Help</a></li>
<li class="hide-sm"><a href="https://apiary.io/company">Company</a></li>
<li><a href="https://login.apiary.io/login">Sign In</a></li>
<li><a class="site-nav-signup" href="https://login.apiary.io/login">Sign Up</a></li>

        <li><a href="javascript:;" class="openMobileNav">&#x2630; Menu</a></li>
      </ul>
    </nav>
  </div>
</header>





      <div class="layout-content">
        <div class="layout-content-inner">
          <div class="page">
  
  <nav class="page-breadcrumbs">
    <ul class="breadcrumbs">
        
        
          <li>
            
              <a href="../../">Apiary Help</a>
            
          </li>
        
          <li>
            
              <a href="../">API 101</a>
            
          </li>
        
          <li class="active">
            
              Using Apiary with Bitbucket
            
          </li>
        
    </ul>
  </nav>



  <aside class="page-aside" property="hasPart" typeof="WPSideBar">
    <aside>
  <div class="aside-category">
    <h2 class="aside-category-title"><a href="../../tools/" class="category-link">Apiary Tools</a></h2>
    <ul class="aside-category-page-list">
      
      
        <li><a href="../../tools/apiary-editor/">Apiary Editor</a></li>
      
        <li><a href="../../tools/interactive-documentation/">Interactive Documentation</a></li>
      
        <li><a href="../../tools/mock-server/">Mock Server</a></li>
      
        <li><a href="../../tools/api-inspector/">API Inspector</a></li>
      
        <li><a href="../../tools/github-sync/">GitHub Sync</a></li>
      
        <li><a href="../../tools/github-integration/">GitHub Integration</a></li>
      
        <li><a href="../../tools/automated-testing/">Automated Testing</a></li>
      
        <li><a href="../../tools/apiary-cli/">Apiary CLI</a></li>
      
        <li><a href="../../tools/github-enterprise-integration/">GitHub Enterprise (GHE) Integration</a></li>
      
        <li><a href="../../tools/code-examples/">Integrated Code Examples</a></li>
      
        <li><a href="../../tools/embed/">Embed documentation</a></li>
      
        
      
        
      
        
      
        
      
        
      
        <li><a href="../../tools/style-guide/">API Style Guide</a></li>
      
        <li><a href="../../tools/troubleshooting-github/">Troubleshooting GitHub Sync and Integration</a></li>
      
        <li><a href="../../tools/version-history/">Version history</a></li>
      
    </ul>
  </div>

  <div class="aside-category">
    <h2 class="aside-category-title"><a href="../../faq/" class="category-link">FAQs</a></h2>
  </div>

  <div class="aside-category">
    <h2 class="aside-category-title">Resources</h2>
    <ul class="aside-category-page-list">
      <li><a href="../api_blueprint_tutorial/" class="category-link-resources">API Blueprint Tutorial</a></li>
      <li><a href="http://support.apiary.io/forums/120125-general" class="category-link-resources" target="blank">Feedback</a></li>
      <li><a href="https://apiary.io/support" class="category-link-resources" target="blank">Support</a></li>
    </ul>
  </div>
</aside>

  </aside>

  <article class="page-content" role="main" property="mainEntityOfPage" typeof="Article">
    <header class="page-header">
      <h1 class="page-title" property="headline">Using Apiary with Bitbucket</h1>
    </header>
    <div property="text" class="entry-content">
      <div class="block block--lead">
        
<p>This article describes how to setup <strong>one way</strong> integration of Bitbucket,
Bitbucket server (Stash) or any other version control system (VCS) with Apiary.</p>

      </div>

<h2 id="one-way-integration">One way integration</h2>

<p>A <strong>one way</strong> VCS integration is a connection of a VCS service with
Apiary through a third party continuous integration provider (CI) where the API
description (API Blueprint or Swagger)) can be changed only from the VCS
(outside of Apiary).</p>

<p>A push of a new version of API description into the VCS will trigger the CI
deployment of the new version into Apiary. With this setup you won&#x2019;t be able to
modify your API description inside Apiary as no changes are propagated from
Apiary back to the VCS.</p>

<p>Optionally, you may also include the API tests in this integration.</p>

<p>This article is using <a href="https://bitbucket.org/">Bitbucket</a> as the VCS and
<a href="https://codeship.com/">Codeship</a> CI as examples, but it should be possible to
create a similar setup using any other VCS and CI providers.</p>

<h2 id="create-an-api-project-at-apiary">1. Create an API Project at Apiary</h2>

<p>Create a new API Project in Apiary if you haven&#x2019;t done it already. Pay attention
 to its API name as it will be needed later.</p>

<h2 id="create-a-bitbucket-repository">2. Create a Bitbucket repository</h2>

<p>Create or select a repository on Bitbucket that should host the API description.
Make sure you have permissions to add web hooks to this repository.</p>

<h2 id="generate-apiary-token">3. Generate Apiary Token</h2>

<p><a href="../../tools/apiary-cli/#generating-an-authentication-token">Generate your personal Apiary token</a>.</p>

<p>This token will be needed to setup the CI later.
Any pushes to the VCS will be propagated to Apiary using this token and
therefore your credentials.</p>

<h2 id="create-codeship-project">4. Create Codeship Project</h2>

<p>In Codeship, create a new project and select the repository from the step 2.</p>

<p><img src="../../images/bitbucket-integration/codeship-new-project.png" alt="Codeship Project"></p>

<h2 id="setup-codeship-environment">5. Setup Codeship Environment</h2>

<p>In your Codeship project go to the project settings &gt; environment
variables. Add the <code>APIARY_API_KEY</code> variable. Its value is your Apiary token
generated in the step 3.</p>

<p><img src="../../images/bitbucket-integration/codeship-environment.png" alt="Codeship Environment"></p>

<h2 id="setup-deploy">6. Setup Deploy</h2>

<p>In your Codeship project, create a new deployment pipeline. Select the branch
<code>master</code> as the trigger. Choose the &#x201C;custom script&#x201D; as deployment method.</p>

<p>The custom script should look like this. Replace <code>APIARY_API_NAME</code> with the
API name from the step 1.</p>

<pre><code class="language-bash"># set ruby version
rvm use ruby-2.5.0 --install

# Install Apiary CLI
gem install apiaryio

# Push to Apiary
apiary publish --api-name=&quot;APIARY_API_NAME&quot;
</code></pre>

<p><img src="../../images/bitbucket-integration/codeship-deployment.png" alt="Codeship deploy"></p>

<p>As of now you should be able to push an API description to the repository and
after the automatic deploy the changes will get reflected in Apiary.</p>

<h2 id="setup-tests">7. Setup Tests</h2>

<p>Optionally, you might want to test your API before it is deployed. We suggest
keeping your API description is in the same repository as the API implementation.
If this is not the case please disregard this step.</p>

<p>In Codeship project settings go to the tests settings, and select &#x201C;Node.js&#x201D; as
the base technology for testing commands.</p>

<p>Fill in following as the setup commands.</p>

<pre><code class="language-bash">nvm install 0.10
npm install
npm install -g dredd
</code></pre>

<p>Add following as test commands.</p>

<pre><code class="language-bash">npm test
</code></pre>

<p><img src="../../images/bitbucket-integration/codeship-tests.png" alt="Codeship tests"></p>

<div class="block block--warning">
        <div class="block__heading">Testing with Dredd</div>
<p>See the  <a href="../../tools/automated-testing/testing-local/">Local API testing with Dredd</a>
and <a href="../../tools/automated-testing/testing-ci/">Continuous API testing</a> for more
details.</p>

      </div>

<h2 id="lock-editing-in-apiary">7. Lock editing in Apiary</h2>

<p>Finally, you might want to lock editing of the API description in Apiary to
prevent any changes that would be discarded.</p>

<p>At Apiary in your API people settings uncheck the &#x201C;Editors&#x201D; checkbox.</p>

<p><img src="../../images/bitbucket-integration/apiary-editors.png" alt="Apiary editors"></p>

<h2 id="push-to-bitbucket">8. Push to Bitbucket</h2>

<p>Everything is set. Time to push a change to your Bitbucket repository.</p>

<p>If everything is set correctly, your Codeship project task should look like this:</p>

<p><img src="../../images/bitbucket-integration/codeship-task.png" alt="Codeship task"></p>

<p>If your API tests passes, the <a href="../../tools/interactive-documentation/">Apiary documentation</a>
 will get updated automatically.</p>

<p>You can also find the CI test report in Apiary:</p>

<p><img src="../../images/bitbucket-integration/apiary-tests.png" alt="Apiary test"></p>

<p>And since your API is tested, you can add the badge to the Bitbucket project
README.</p>

<p><img src="../../images/bitbucket-integration/bitbucket-badge.png" alt="Bitbucket badge"></p>

<h2 id="conclusion">Conclusion</h2>

<p>If you have followed all the steps in this article, your changes in API
description on bitbucket will get test and in the case of success they will be
pushed to Apiary.</p>

<p>This means your API documentation is always living up to what has been merged in
 to the master branch of your API implementation!</p>

<div class="block block--warning">
        <div class="block__heading">Example API</div>
<p>You can find the example API used in this article on <a href="https://bitbucket.org/zdne/helloapi">Bitbucket</a> and its <a href="http://docs.hellobitbucket.apiary.io/#">documentation at Apiary</a>.</p>


      </div>

    </div>

    <div class="pageFeedback">
  <div class="pageFeedback--initial">
    <div class="pageFeedback--question">
      Was this page useful?
    </div>
    <div class="pageFeedback--yes"></div>
    <div class="pageFeedback--no"></div>
  </div>
  <div class="pageFeedback--thankYouBlock">
    Thank you for the feedback!
  </div>
  <div class="pageFeedback--whatWentWrong">
    <div class="pageFeedback--whatWentWrongTitle">What went wrong?</div>
    <label><input type="checkbox" id="droids" value="droids"> It&#x2019;s not what I was looking for</label>
    <label><input type="checkbox" id="simplify" value="simplify"> It was hard to understand</label>
    <label><input type="checkbox" id="else" value="else"> Something else</label>
  </div>
</div>

    
  <div class="relatedTopics">
    <h2 class="relatedTopics__title">Related topics</h2>
    <ul class="relatedTopics__list">
      
        <li><a href="../gitlab-integration/">Using Apiary with GitLab</a><br></li>
      
        <li><a href="../enhancing-apiary-workflow/">Enhancing Apiary Workflow</a><br></li>
      
        <li><a href="../dredd-tutorial/">Dredd Tutorial</a><br></li>
      
        <li><a href="../../tools/github-sync/">GitHub Sync</a><br></li>
      
        <li><a href="../../tools/automated-testing/testing-local/">Local API testing with Dredd</a><br></li>
      
    </ul>
  </div>


  </article>
</div>

        </div>
      </div>

      <footer>
  <div class="footerRow">
    <div class="footerColumns">
      <div class="footerColumn">
        <h4 class="footerTitle">Platform</h4>
        <ul class="footerList">
          <li><a class="footerListLink" href="https://apiary.io/how-it-works">How It Works</a></li>
          <li><a class="footerListLink" href="https://apiary.io/products">Product</a></li>
          <li><a class="footerListLink" href="https://enterprise.apiary.io/">Enterprise</a></li>
          <li><a class="footerListLink" href="https://apiary.io/plans">Plans</a></li>
          <li><a class="footerListLink" href="../../">Help</a></li>
        </ul>
      </div>
      <div class="footerColumn">
        <h4 class="footerTitle">Company</h4>
        <ul class="footerList">
          <li><a class="footerListLink" href="http://blog.apiary.io/">Blog</a></li>
          <li><a class="footerListLink" href="https://apiary.io/company">Team</a></li>
          <li><a class="footerListLink" href="https://apiary.io/jobs">Jobs</a></li>
          <li><a class="footerListLink" href="https://apiary.io/contact">Contact</a></li>
          <li><a class="footerListLink" href="https://static.apiary.io/assets/29b1ca7e9b4668542aa05ccd5f9338a6.zip">Press Kit</a></li>
        </ul>
      </div>
      <div class="mobileBreak"></div>
      <div class="footerColumn">
        <h4 class="footerTitle">Open Source</h4>
        <ul class="footerList">
          <li><a class="footerListLink" href="https://apiblueprint.org">API Blueprint</a></li>
          <li><a class="footerListLink" href="https://github.com/apiaryio/snowcrash">Snow Crash</a></li>
          <li><a class="footerListLink" href="https://github.com/apiaryio/gavel">Gavel</a></li>
          <li><a class="footerListLink" href="http://dredd.readthedocs.org/">Dredd</a></li>
          <li><a class="footerListLink" href="../../tools/apiary-cli/">Apiary CLI</a></li>
        </ul>
      </div>
      <div class="footerColumn">
        <h4 class="footerTitle">Social</h4>
        <ul class="footerList">
          <li><a class="footerListLink" href="https://github.com/apiaryio">GitHub</a></li>
          <li><a class="footerListLink" href="https://twitter.com/apiaryio">Twitter</a></li>
          <li><a class="footerListLink" href="https://facebook.com/apiary.io">Facebook</a></li>
        </ul>
      </div>
    </div>
  </div>

  <div class="footerRow">
    <p class="footerCopyright">Copyright &#xA9; 2017, Oracle and/or its affiliates. All rights reserved. Oracle and Java are registered trademarks of Oracle and/or its affiliates. Other names may be trademarks of their respective owners. <span class="footerCopyrightLinks">&#x2022; <a href="https://apiary.io/tos" class="footerCopyrightLink">Terms</a> &#x2022; <a href="https://apiary.io/privacy" class="footerCopyrightLink">Privacy</a></span></p>
  </div>
</footer>

    </div>
    <nav class="mobileNav">
  <div class="mobileNav-inner">
    <a href="javascript:;" class="closeMobileNav">&#x2715; Close menu</a>
    <ul class="mobileNav-list">
      <li><a href="../../">Docs home</a></li>
      <li><a href="https://apiary.io">Back to Apiary.io</a></li>
      <li><a href="https://apiary.io/how-it-works">How It Works</a></li>
<li><a href="https://apiary.io/plans">Plans</a></li>
<li><a href="https://apiary.io/products">Product</a></li>
<li><a href="../../">Help</a></li>
<li class="hide-sm"><a href="https://apiary.io/company">Company</a></li>
<li><a href="https://login.apiary.io/login">Sign In</a></li>
<li><a class="site-nav-signup" href="https://login.apiary.io/login">Sign Up</a></li>

    </ul>
    <aside>
  <div class="aside-category">
    <h2 class="aside-category-title"><a href="../../tools/" class="category-link">Apiary Tools</a></h2>
    <ul class="aside-category-page-list">
      
      
        <li><a href="../../tools/apiary-editor/">Apiary Editor</a></li>
      
        <li><a href="../../tools/interactive-documentation/">Interactive Documentation</a></li>
      
        <li><a href="../../tools/mock-server/">Mock Server</a></li>
      
        <li><a href="../../tools/api-inspector/">API Inspector</a></li>
      
        <li><a href="../../tools/github-sync/">GitHub Sync</a></li>
      
        <li><a href="../../tools/github-integration/">GitHub Integration</a></li>
      
        <li><a href="../../tools/automated-testing/">Automated Testing</a></li>
      
        <li><a href="../../tools/apiary-cli/">Apiary CLI</a></li>
      
        <li><a href="../../tools/github-enterprise-integration/">GitHub Enterprise (GHE) Integration</a></li>
      
        <li><a href="../../tools/code-examples/">Integrated Code Examples</a></li>
      
        <li><a href="../../tools/embed/">Embed documentation</a></li>
      
        
      
        
      
        
      
        
      
        
      
        <li><a href="../../tools/style-guide/">API Style Guide</a></li>
      
        <li><a href="../../tools/troubleshooting-github/">Troubleshooting GitHub Sync and Integration</a></li>
      
        <li><a href="../../tools/version-history/">Version history</a></li>
      
    </ul>
  </div>

  <div class="aside-category">
    <h2 class="aside-category-title"><a href="../../faq/" class="category-link">FAQs</a></h2>
  </div>

  <div class="aside-category">
    <h2 class="aside-category-title">Resources</h2>
    <ul class="aside-category-page-list">
      <li><a href="../api_blueprint_tutorial/" class="category-link-resources">API Blueprint Tutorial</a></li>
      <li><a href="http://support.apiary.io/forums/120125-general" class="category-link-resources" target="blank">Feedback</a></li>
      <li><a href="https://apiary.io/support" class="category-link-resources" target="blank">Support</a></li>
    </ul>
  </div>
</aside>

  </div>
</nav>

    
  <script>
    window._trackJs = {
      token: '60775d2a4c124659ba6585cf31909f85',
      application: 'docs-portal'
    };

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-18252923-8', 'auto');
    ga('send', 'pageview');
  </script>





<script type="text/javascript" src="../../assets/main-9de9a2eabd0d23c2aefea3d1fee69cd4bb776643ddb27cfeb7da88d5371bc1cb.js?8d147e3a37768b440f679294bd9bc305"></script>



  


</body></html>